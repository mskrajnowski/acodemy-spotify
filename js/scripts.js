angular.module("acodemy-app.apis.spotify",[]).provider("SpotifyApi",["$sceDelegateProvider",function(t){var a=t.resourceUrlWhitelist();a.push("https://p.scdn.co/mp3-preview/**"),t.resourceUrlWhitelist(a),this.apiUrl="https://api.spotify.com/v1",this.defaults={params:{limit:10}},this.$get=["$http",function(t){return{apiUrl:this.apiUrl,defaults:this.defaults,search:function(a,n){var e=this.apiUrl+"/search",r=angular.copy(this.defaults);return r.params.q=a,r.params.type=n.join(","),t.get(e,r)},getAlbums:function(a){var n=this.apiUrl+"/albums",e=angular.copy(this.defaults);return e.params.ids=a.join(","),t.get(n,e).then(function(t){return t.data.albums})},getAlbum:function(t){return this.getAlbums([t]).then(function(t){return t[0]})},getArtists:function(a){var n=this.apiUrl+"/artists",e=angular.copy(this.defaults);return e.params.ids=a.join(","),t.get(n,e).then(function(t){return t.data.artists})},getArtist:function(t){return this.getArtists([t]).then(function(t){return t[0]})},getArtistsAlbums:function(a){return t.get(this.apiUrl+"/artists/"+a+"/albums",this.defaults).then(function(t){return t.data})},getArtistsTopTracks:function(a){var n=angular.copy(this.defaults);return n.params.country="US",t.get(this.apiUrl+"/artists/"+a+"/top-tracks",n).then(function(t){return t.data.tracks})},getRelatedArtists:function(a){return t.get(this.apiUrl+"/artists/"+a+"/related-artists",this.defaults).then(function(t){return t.data.artists})}}}]}]),angular.module("acodemy-app",["ngRoute","acodemy-app.directives.clearable-input","acodemy-app.navbar","acodemy-app.routes.search","acodemy-app.routes.album","acodemy-app.routes.artist"]).config(["$routeProvider",function(t){var a={redirectTo:"/search"};t.when("/",a).otherwise(a)}]),angular.module("acodemy-app.filters.duration",[]).filter("duration",function(){return function(t){var a=Math.round(t/1e3),n=Math.floor(a/60);return a%=60,n+":"+(10>a?"0"+a:a)}}),angular.module("acodemy-app.navbar",[]).controller("NavbarController",["$scope","$location",function(t,a){t.search=a.search().q||"",t.$watch("search",function(t){a.search("q",t||null)}),t.openSearchRoute=function(){"/search"!==a.path()&&a.path("/search")},t.clearSearch=function(){t.search=""}}]),angular.module("acodemy-app.directives.clearable-input",[]).directive("clearableInput",function(){return{restrict:"E",require:"ngModel",link:function(t,a,n,e){var r=a[0];r.addEventListener("input",function(){t.$apply(function(){e.$setViewValue(r.value)})}),e.$render=function(){r.value=e.$viewValue}}}}),angular.module("acodemy-app.routes.artist",["ngRoute","acodemy-app.apis.spotify","acodemy-app.filters.duration"]).config(["$routeProvider",function(t){t.when("/artist/:id",{templateUrl:"routes/artist/artist.html",controller:"ArtistRouteController"})}]).controller("ArtistRouteController",["$scope","$routeParams","$q","SpotifyApi",function(t,a,n,e){t.artist={},t.albums=[],t.topTracks=[],t.relatedArtists=[],n.all([e.getArtist(a.id),e.getArtistsAlbums(a.id),e.getArtistsTopTracks(a.id),e.getRelatedArtists(a.id)]).then(function(a){t.artist=a[0],t.albums=a[1],t.topTracks=a[2],t.relatedArtists=a[3]})}]),angular.module("acodemy-app.routes.album",["ngRoute","acodemy-app.apis.spotify","acodemy-app.filters.duration"]).config(["$routeProvider",function(t){t.when("/album/:id",{templateUrl:"routes/album/album.html",controller:"AlbumRouteController"})}]).controller("AlbumRouteController",["$scope","$routeParams","SpotifyApi",function(t,a,n){t.album={},n.getAlbum(a.id).then(function(a){t.album=a;var e=a.artists.reduce(function(t,a){return t.push(a.id),t},[]);return n.getArtists(e)}).then(function(a){t.artists=a})}]),angular.module("acodemy-app.routes.search",["ngRoute","acodemy-app.apis.spotify","acodemy-app.filters.duration"]).config(["$routeProvider",function(t){t.when("/search",{templateUrl:"routes/search/search.html",controller:"SearchRouteController",reloadOnSearch:!1})}]).controller("SearchRouteController",["$scope","$location","$routeParams","SpotifyApi",function(t,a,n,e){function r(){return n.q?void e.search(n.q,["album","artist","track"]).then(function(a){t.searchResults=a.data}):void(t.searchResults={})}t.searchResults={},t.$on("$routeUpdate",r),r()}]);var test;test="abcdeg";var test2;test2="abddc";var rr;rr="aabbaadd",Polymer("clearable-input",{value:"",ready:function(){for(var t=["input"],a=function(){this.value=this.$.input.value}.bind(this),n=0;n<t.length;n++){var e=t[n];this.$.input.addEventListener(e,a)}a()},valueChanged:function(t,a){this.$.input.value=a},clear:function(){this.value="",this.$.input.value="",this.dispatchEvent(new Event("input",{}))}}),function(){var t={stopped:{iconClass:"fa fa-play",next:"play"},paused:{iconClass:"fa fa-play",next:"play"},playing:{iconClass:"fa fa-pause",next:"pause"}},a=[];Polymer("play-button",{src:"",_iconClass:"",get state(){return this._state},set state(a){this._state=a,this._iconClass=t[a].iconClass},ready:function(){this.state="stopped"},attached:function(){a.push(this)},detached:function(){var t=a.indexOf(this);a.splice(t,1)},onClick:function(){var a=t[this.state].next;this[a]()},srcChanged:function(){this.stop()},play:function(){a.forEach(function(t){t!==this&&t.stop()}),this.src!==this.$.audio.src&&(this.$.audio.src=this.src,this.$.audio.load()),this.$.audio.play(),this.state="playing"},pause:function(){this.$.audio.pause(),this.state="paused"},stop:function(){this.$.audio.pause(),this.$.audio.currentTime=0,this.state="stopped"}})}();var a;a="b";var test;test=function(t){return console.log(t,b,c,"d")},angular.module("acodemy-app").run(["$templateCache",function(t){t.put("navbar/navbar.html",'<nav class="app-navbar initialized"\n     ng-class="{minimized: search}"\n     ng-controller="NavbarController">\n  <div class="app-logo">\n    <a href="#/search"\n       ng-click="clearSearch()">\n      <i class="fa fa-spotify"></i> Spotify browser\n    </a>\n\n    <span ng-show="search">\n      : {{ search }}\n    </span>\n  </div>\n\n  <div class="app-search">\n    <clearable-input placeholder="search..."\n                     ng-model="search"\n                     ng-model-options="{debounce: 250}"\n                     ng-change="openSearchRoute()">\n    </clearable-input>\n  </div>\n</nav>\n'),t.put("routes/album/album.html",'<header class="page-header">\n  <aside>\n    <div class="thumb-l"\n         ng-style="{\'background-image\': \'url(\' + album.images[1].url + \')\'}">\n    </div>\n\n    <ul class="thumbs-list">\n      <li ng-repeat="artist in artists">\n        <a href="#/artist/{{ artist.id }}">\n          <div class="thumb-s"\n               ng-style="{\'background-image\': \'url(\' + artist.images[2].url + \')\'}">\n          </div>\n          <p>{{ artist.name }}</p>\n        </a>\n      </li>\n    </ul>\n  </aside>\n\n  <section>\n    <header>\n      <h1>{{ album.name }}</h1>\n      <h2>{{ album.release_date | date:\'yyyy\' }}</h2>\n    </header>\n\n    <section class="table-section">\n      <header><h1>Tracks</h1></header>\n      <table class="tracks-table">\n        <tr ng-repeat="track in album.tracks.items">\n          <td>\n            <play-button src="{{ track.preview_url }}"></play-button>\n          </td>\n          <td><a href="#/album/{{ track.album.id }}">{{ track.name }}</a></td>\n          <td><a href="#/album/{{ track.album.id }}">{{ track.album.name }}</a></td>\n          <td>\n            <a ng-repeat="artist in track.artists"\n               href="#/artist/{{ artist.id }}">\n              {{ artist.name }}\n            </a>\n          </td>\n          <td class="">{{ track.duration_ms | duration }}</td>\n        </tr>\n      </table>\n    </section>\n  </section>\n</header>\n'),t.put("routes/artist/artist.html",'<header class="page-header">\n  <aside>\n    <div class="thumb-l"\n         ng-style="{\'background-image\': \'url(\' + artist.images[1].url + \')\'}">\n    </div>\n  </aside>\n\n  <section>\n    <header>\n      <h1>{{ artist.name }}</h1>\n      <h2>{{ artist.followers.total }} followers</h2>\n    </header>\n\n    <section class="table-section">\n      <header><h1>Top tracks</h1></header>\n      <table class="tracks-table">\n        <tr ng-repeat="track in topTracks">\n          <td>\n            <play-button src="{{ track.preview_url }}"></play-button>\n          </td>\n          <td><a href="#/album/{{ track.album.id }}">{{ track.name }}</a></td>\n          <td><a href="#/album/{{ track.album.id }}">{{ track.album.name }}</a></td>\n          <td>\n            <a ng-repeat="artist in track.artists"\n               href="#/artist/{{ artist.id }}">\n              {{ artist.name }}\n            </a>\n          </td>\n          <td class="">{{ track.duration_ms | duration }}</td>\n        </tr>\n      </table>\n    </section>\n  </section>\n</header>\n\n<section class="tiles-section">\n  <header>\n    <h1>Albums</h1>\n    <h2>{{ albums.total }} found</h2>\n  </header>\n  <div class="tiles-container">\n    <a ng-repeat="album in albums.items"\n       class="tile thumb-m"\n       ng-style="{\'background-image\': \'url(\' + album.images[1].url + \')\'}"\n       title="{{ album.name }}"\n       href="#/album/{{ album.id }}">\n    </a>\n  </div>\n</section>\n\n<section class="tiles-section">\n  <header>\n    <h1>Related artists</h1>\n  </header>\n  <div class="tiles-container">\n    <a ng-repeat="artist in relatedArtists"\n       class="tile thumb-m"\n       ng-style="{\'background-image\': \'url(\' + artist.images[1].url + \')\'}"\n       title="{{ artist.name }}"\n       href="#/artist/{{ artist.id }}">\n    </a>\n  </div>\n</section>\n'),t.put("routes/search/search.html",'<div>\n  <section class="tiles-section">\n    <header>\n      <h1>Albums</h1>\n      <h2>{{ searchResults.albums.total }} found</h2>\n    </header>\n    <div class="tiles-container">\n      <a ng-repeat="album in searchResults.albums.items"\n         class="tile thumb-m"\n         ng-style="{\'background-image\': \'url(\' + album.images[1].url + \')\'}"\n         title="{{ album.name }}"\n         href="#/album/{{ album.id }}">\n      </a>\n    </div>\n  </section>\n\n  <section class="tiles-section">\n    <header>\n      <h1>Artists</h1>\n      <h2>{{ searchResults.artists.total }} found</h2>\n    </header>\n    <div class="tiles-container">\n      <a ng-repeat="artist in searchResults.artists.items"\n         class="tile thumb-m"\n         ng-style="{\'background-image\': \'url(\' + artist.images[1].url + \')\'}"\n         title="{{ artist.name }}"\n         href="#/artist/{{ artist.id }}">\n      </a>\n    </div>\n  </section>\n\n  <section class="table-section">\n    <header>\n      <h1>Tracks</h1>\n      <h2>{{ searchResults.tracks.total }} found</h2>\n    </header>\n    <table class="tracks-table">\n      <tr ng-repeat="track in searchResults.tracks.items">\n        <td>\n          <play-button src="{{ track.preview_url }}"></play-button>\n        </td>\n        <td><a href="#/album/{{ track.album.id }}">{{ track.name }}</a></td>\n        <td><a href="#/album/{{ track.album.id }}">{{ track.album.name }}</a></td>\n        <td>\n          <a ng-repeat="artist in track.artists"\n             href="#/artist/{{ artist.id }}">\n            {{ artist.name }}\n          </a>\n        </td>\n        <td class="">{{ track.duration_ms | duration }}</td>\n      </tr>\n    </table>\n  </section>\n</div>\n'),t.put("webcomponents/clearable-input/clearable-input.html",'<link rel="import" href="/bower/polymer/polymer.html">\n\n<polymer-element name="clearable-input" attributes="value placeholder">\n  <template>\n    <style>\n      @import url(\'/bower/font-awesome/css/font-awesome.css\');\n\n      * {\n        box-sizing: border-box;\n      }\n\n      input, button {\n        outline: none;\n        font-size: 16px;\n      }\n\n      button {\n        display: none;\n        cursor: pointer;\n      }\n\n      button.visible {\n        display: block;\n      }\n    </style>\n\n    <input id="input" type="text" placeholder="{{ placeholder }}">\n    <button on-click="{{ clear }}"\n            class="{{ {visible: !!value} | tokenList }}">\n      <i class="fa fa-times"></i>\n    </button>\n  </template>\n  <script src="clearable-input.js"></script>\n</polymer-element>\n'),t.put("webcomponents/play-button/play-button.html",'<link rel="import" href="/bower/polymer/polymer.html">\n\n<polymer-element name="play-button" attributes="src">\n  <template>\n    <style>\n    @import url(\'/bower/font-awesome/css/font-awesome.css\');\n    @import url(\'play-button.css\');\n\n    * {\n      box-sizing: border-box;\n    }\n\n    button {\n      outline: none;\n      cursor: pointer;\n      font-size: 16px;\n    }\n    </style>\n\n    <button id="button"\n            class="play-button"\n            type="button"\n            on-click="{{ onClick }}">\n      <div class="icon-background">\n        <i class="{{ _iconClass }}"></i>\n      </div>\n    </button>\n    <audio id="audio" src=""></audio>\n  </template>\n  <script src="play-button.js"></script>\n</polymer-element>\n')}]);